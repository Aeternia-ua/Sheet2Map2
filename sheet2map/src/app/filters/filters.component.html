<form clrForm [formGroup]="filterForm">
  <div *ngFor="let category of filterForm.controls | keyvalue ">
    <clr-vertical-nav-group>
        <button type="button"
                class="btn btn-icon btn-clear-filters"
                [name]="category.key"
                title="Clear filters"
                aria-label="clear filters"
                [disabled]=true
                #clearFiltersBtn
                (click)="$event.stopPropagation();
                this.uncheckFilters(category.key);
                this.filtersService.clearFilters(category.key)">
          <clr-icon shape="filter-off" class="btn-clear-filters-icon is-solid"></clr-icon>
        </button>
      <span>{{category.key}}</span>

      <clr-vertical-nav-group-children class="filter-group-children" *clrIfExpanded>
        <ng-container [formGroupName]="category.key"
                      *ngFor="let filter of category.value.controls | keyvalue | slice:0: show; index as i; let last=last">
          <clr-checkbox-container>
            <clr-checkbox-wrapper>
              <input type="checkbox" clrCheckbox
                     id="{{filter.key}}"
                     [formControlName]=filter.key
                     value="{{filter}}"
                     (change)="this.filtersService.getSelectedFilters(category.key, filter.key, filter.value.numberOfMarkers, $event)"/>
              <label>{{filter.key}}</label>
            </clr-checkbox-wrapper>
          </clr-checkbox-container>
          <ng-container *ngIf="last && i+1 >= 10">
            <btn (click)="expandFilters()">Total Count {{i+1}}</btn>
          </ng-container>
        </ng-container>
      </clr-vertical-nav-group-children>

    </clr-vertical-nav-group>
  </div>
</form>
